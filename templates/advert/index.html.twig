{% extends 'base.html.twig' %}
{% block title %}Adverts{% endblock %}
{% block body %}
<div data-controller="advert">
    <div>
        <div class="search">
            <div class="w-full pt-2 relative mx-auto">
                <form name="advert_search" method="POST" data-action="submit->advert#catch_search">
                    <input id="searchtext" class="w-full border-2 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 h-14 px-5 pr-16 rounded-lg focus:outline-none focus:ring-0 focus:border-deep-orange-400 dark:text-white text-lg dark:placeholder-gray-100" type="search" name="search" placeholder="Search" autocomplete="off">
                    <button type="submit" class="absolute right-0 top-0 mt-5 mr-4" data-target="catch_search.submit">
                        <svg class="text-gray-600 dark:text-white h-8 w-8 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" width="512px" height="512px">
                            <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
                        </svg>
                    </button>
                    <div class="w-full">
                        <span class="text-gray-600 dark:text-gray-200 italic text-sm">find items, services or buyers ...</span>
                    </div>
                </form>
            </div>
            <div class="filter w-full flex justify-between mt-5 text-gray-400 items-center">
                <div class="w-60">
                    <label class="block">
                        <select class="dark:bg-gray-900 dark:text-gray-100 dark:border-gray-500 block w-full rounded border-gray-300 shadow-sm focus:border-deep-orange-300 focus:ring-0">
                            <option value="" disabled selected>Order by</option>
                            <option>Likes</option>
                            <option>Most Recent</option>
                        </select>
                    </label>
                </div>
                <div>
                    <a class="font-medium rounded uppercase flex items-center text-deep-orange-600 px-3 py-1  bg-white hover:bg-deep-orange-500 hover:text-white border-2 dark:bg-gray-500 dark:text-white dark:border-gray-500 shadow focus:border-0 focus:ring-0 focus:outline-none modal-open cursor-pointer" data-modalid="myModalEmail"> <span>Filter</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="content mt-5 flex flex-wrap justify-between">
        <div class="left md:w-3/4 w-full my-2">
            <div id="advert-container" class="w-full">
                {% for advert in adverts %}
                <div class="bg-white dark:bg-gray-900 dark:text-white w-full rounded shadow flex flex-wrap card text-gray-900 mr-3 mb-2">
                    <div class="w-full md:w-1/5">
                        <img class="w-full h-full md:h-52 rounded-l-sm" src="{{asset('images/feature.jpg')}}" alt="Room Image">
                    </div>
                    <div class="w-full md:w-4/5 flex flex-col">
                        <div class="p-4 pb-3 md:pb-0 flex-1 w-full">
                            <div class="flex justify-between items-center mb-1">
                                <a href="{{path('advert_show', {'id': advert.id})}}" class="w-5/6 font-medium text-gray-900 dark:text-white text-xl md:text-2xl truncate">{{advert.title}}</a>
                                <div>
                                    <div class="inline-block relative ">
                                        <a onclick="toggleDD('menu-links_{{advert.id}}')" class="w-52 cursor-pointer drop-button text-gray-700 dark:text-gray-100 focus:outline-none text-xs md:text-sm inline-block flex items-center justify-end drop-button">
                                            <div class="block">
                                            <span class="no-pointer-event flex bg-deep-orange-600  text-white px-3 py-1 rounded font-semibold"> <span class="inline-block pr-2"> actions</span>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="border-l border-deep-orange-400 ml-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                </svg> </span> </a>
                                            </div>
                                    </div>
                                    <div id="menu-links_{{advert.id}}" role="menu" tabindex="0" class="dropdownlist invisible z-20 absolute w-52 mt-2 origin-top-right bg-white dark:bg-gray-800 dark:border-gray-700 divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
                                        <div class="px-1 py-1" role="none">
                                            <button class="focus:outline-none hover:bg-deep-orange-800 hover:text-white text-gray-900 dark:text-gray-200 group flex rounded-md items-center w-full px-2 py-2 text-sm" role="menuitem" tabindex="-1">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd" />
                                                </svg>
                                                Report
                                            </button>
                                            <a href="{{path('advert_edit', {'id': advert.id})}}" class="focus:outline-none hover:bg-deep-orange-800 hover:text-white text-gray-900 dark:text-gray-200 group flex rounded-md items-center w-full px-2 py-2 text-sm" role="menuitem" tabindex="-1">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                                    <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
                                                    <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />
                                                </svg>
                                                Edit
                                            </a>
                                            <button class="focus:outline-none hover:bg-deep-orange-800 hover:text-white text-gray-900 dark:text-gray-200 group flex rounded-md items-center w-full px-2 py-2 text-sm" role="menuitem" tabindex="-1">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                                    <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" />
                                                </svg>
                                                Bookmark
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-sm font-light flex items-center mb-4 flex-wrap">
                                <div class="flex mr-5">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 dark:text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                    {{ advert.fullname}}
                                </div>
                                <div class="flex mr-5">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 dark:text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                                    </svg>
                                    {{advert.lga}}, {{ advert.state}}
                                </div>
                                <div class="flex">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 dark:text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                    </svg>
                                    <a href="tel:123-456-7890">{{ advert.phone}}</a>
                                </div>
                            </div>
                            <span class="has-tag block w-full text-md text-gray-600 dark:text-white truncate">{{ advert.description}}</span>
                            <div class="tags mt-5 text-gray-600 dark:text-white text-sm italic">
                                <span>{{ advert.createdAt|ago_date}}</span>
                            </div>
                            <div class="flex justify-between mt-4">
                                <div class="flex static relative right-0 items-center  w-full">
                                    <div class="mr-3 flex  items-center text-md text-deep-orange-500 dark:text-deep-orange-200">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                                            <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                                        </svg> <span>5 </span>
                                    </div>
                                    <div class="mr-3 flex items-center  text-md text-deep-orange-500 dark:text-deep-orange-200">
                                        <span>28</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mx-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                                        </svg>
                                    </div>
                                    <div class="w-1/3 flex items-center text-md text-deep-orange-500 dark:text-deep-orange-200">
                                        <span>28 </span>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mx-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5" />
                                        </svg>
                                    </div>
                                </div>
                                {% if advert.category.name == "sell" %}
                                <div class="bg-regal-blue uppercase flex items-center rounded px-2 leading-tight  text-xs text-white font-semibold">
                                    <span>Seller</span>
                                </div>
                                {% elseif advert.category.name == "buy" %}
                                <div class="bg-green-700 uppercase flex items-center rounded px-2 leading-tight  text-xs text-white font-semibold">
                                    <span>Buyer</span>
                                </div>
                                {% else %}
                                <div class="bg-pink-700 uppercase flex items-center rounded px-2 leading-tight  text-xs text-white font-semibold">
                                    <span>Service</span>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div id="paginate-container" class="navigation flex justify-center items-center">
                {% if hasItems == true %}
                {% set nextUrl = path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': next})) %}
                <a data-action="click->advert#nextPage" class="font-semibold mt-5 bg-deep-orange-600 px-3 py-2 hover:bg-deep-orange-700 text-white rounded-full" href="{{ nextUrl }}"> load more </a>
                {% endif %}
            </div>
        </div>
        <div class="hidden lg:block right w-full md:w-1/5 mt-5 md:mt-2 ">
            {% include 'tag/tags.html.twig' %}
        </div>
    </div>
    <div id='myModalEmail' class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 z-30 left-0 flex items-center justify-center inset-0 overflow-y-auto">
        {# <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div> #}
        <div class="modal-overlay fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-95 transition-opacity" aria-hidden="true"></div>
        <div class="modal-container bg-white dark:bg-gray-800 w-11/12 md:max-w-xl mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-white text-sm z-50">
                <svg class="fill-current text-white" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
                    <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                </svg>
                <span class="text-sm"></span>
            </div>
            <!-- Add margin if you want to see some of the overlay behind the modal-->
            <div class="modal-content py-4 text-left px-6 overflow-hidden">
                <!--Title-->
                <div class="flex justify-between items-center pb-3">
                    <p class="text-xl leading-relaxed tracking-wide font-medium text-gray-900 dark:text-gray-50">Advanced Filter</p>
                    <div class="modal-close cursor-pointer z-50">
                        <i class="fas fa-times fill-current text-gray-900 dark:text-gray-50"></i>
                    </div>
                </div>
                <!--Body-->
                <div>
                    {{ form_start(form, {'attr': {'id': 'advert_filter', 'data-action':'submit->advert#catch_filter'}}) }}
                    {{ form_widget(form) }}
                    <div class="w-full flex items-center">
                        <button type="submit" data-target="catch_filter.submit" class="focus:outline-none px-1 py-2 font-semibold w-20 rounded bg-deep-orange-500 hover:bg-deep-orange-700  text-white mt-5 mx-auto">{{ button_label|default('Filter') }}</button>
                        {{ form_end(form) }}
                    </div>
                    {# <div class="px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm">
                            Deactivate
                        </button>
                        <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                            Cancel
                        </button>
                    </div> #}
                </div>
            </div>
        </div>
    </div>
    {% endblock %}